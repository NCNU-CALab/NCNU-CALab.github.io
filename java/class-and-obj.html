<!DOCTYPE html>
<html lang="zh">
  <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">

    <title>SSYU 的書們 | 類別與物件 </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="/style/doc.css">

    <!-- favicon -->
    <link rel="icon" href="/images/favicon.ico"><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    

  </head>
  <body>

   <!-- hexo-inject:begin --><!-- hexo-inject:end --><script>window.__INITIAL_STATE__ = {"page":{"title":"類別與物件","path":"java/class-and-obj.html"},"data":{"navigation":{"logo":{"text":"Programming Yu","type":"link","path":"index.html"},"main":[{"text":"C 程式語言教學","type":"label","children":[{"text":"程式寫作概論","type":"link","path":"c/writing-intro.html"},{"text":"電腦系統概論","type":"link","path":"c/system-intro.html"},{"text":"電腦內部運作","type":"link","path":"c/system-operation.html"},{"text":"C 語言的總覽","type":"link","path":"c/c-intro.html"}]},{"text":"C 程式語言範例","type":"label","children":[{}]},{"text":"Java 程式語言教學","type":"label","children":[{"text":"Java 與 C 的比較","type":"link","path":"java/java-vs-c.html"},{"text":"類別與物件","type":"link","path":"java/class-and-obj.html"},{"text":"陣列","type":"link","path":"java/array.html"},{"text":"封裝","type":"link","path":"java/encapsulation.html"},{"text":"訊息傳遞","type":"link","path":"java/message-passing.html"},{"text":"繼承","type":"link","path":"java/extends.html"},{"text":"介面","type":"link","path":"java/interface.html"},{"text":"例外處理","type":"link","path":"java/exception.html"},{"text":"線串與同步處理","type":"link","path":"java/thread.html"},{"text":"容器類別","type":"link","path":"java/container.html"},{"text":"GUI","type":"link","path":"java/gui.html"},{"text":"IO","type":"link","path":"java/io.html"},{"text":"NET","type":"link","path":"java/net.html"},{"text":"JDBC","type":"link","path":"java/jdbc.html"},{"text":"印表","type":"link","path":"java/easy-print.html"}]},{"text":"Java 程式語言範例","type":"label","children":[{"text":"所得稅計算","type":"link","path":"java/examples/tax-calculate.html"}]},{"text":"資料結構與演算法","type":"label"}]},"posts":[{"text":"The 3n + 1 problem","type":"link","path":"questions/The-3n-1-problem/","date":"2017-12-21T19:53:25+00:00"}]},"config":{"timezone":"Asia/Taipei","root":"/","time_format":"HH:mm:ss","theme":"doc","theme_config":{"swagger_ui":{"version":2,"permalinks":true,"api_explorer":true,"download":"Download specification","show_extensions":false,"deep_linking":true,"display_operation_id":false,"doc_expansion":"none"},"search":{"skip":false,"background":false,"route":"/lunr.json"},"favicon":"images/favicon.ico"}}}</script>

    <div id="react-navigation-root"><div class="doc-navigation" data-reactroot=""><nav class="doc-navbar"><a href="/index.html" class="doc-navbar__logo"><img src="/images/logo.png" class="doc-navbar__logo__img"/><span class="doc-navbar__logo__text">Programming Yu</span></a><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"></div><ul class="doc-sidebar-list"></ul></div></nav></div></div>
    <div class="doc-content">
  <div class="dc-page">
    <div class="dc-card">
      <div id="react-search-results-root"></div>
      <div id="page-content" class="doc-formatting">
        <h1>類別與物件</h1>
        <h2 id="類別與物件的基本概念"><a href="#類別與物件的基本概念" class="headerlink" title="類別與物件的基本概念"></a>類別與物件的基本概念</h2><p>所謂物件，說得白話一點，可稱之為「東西」。這是個很抽象的名詞，我們若以它具體的特性來描述，會比較清楚：</p>
<ul>
<li>Object 有生命週期，會「產生」和「消滅」</li>
<li>Object 具有其內部狀態， 同一類別的不同 Object ，其的內部狀態可能都不一樣</li>
<li>Object 可以接收「訊息」，並依據訊息的參數以及該物件的內部狀態，做出反應，並可能因而改變該物件的內部狀態</li>
</ul>
<p>屬於同一個 Class 的 Object ，會具有該 Class 所定義的以上三種特質。</p>
<p>除此之外， Class 之間可以定義繼承 (Inheritance) 關係，子類別 (Sub Class) 繼承父類別 (Super Class) 的所有特性，子類別還可以定義其專屬的特性。</p>
<p>以 Object-Oriented (物件導向) Language 寫作程式時，寫作的主體是 Class 。 Class 定義了所有屬於該 Class 的 Object 的特性，這些特性可分類如下:</p>
<ul>
<li>Object  產生時一定要呼叫的方法，稱為 Constructor (建構子)</li>
<li>Object 消滅需要呼叫的方法，稱為 Destructor (解構子)</li>
<li>表達 Object 內部狀態的變數，稱為 Object Variable(物件變數成員)</li>
<li>Object 可以接收的訊息，稱為 Object Method(物件方法成員)</li>
<li>上述兩個可總稱為 Object Member</li>
<li>屬於 Class 的變數，稱為 Class Variable (類別變數)</li>
<li>屬於 Class 的方法，成為 Class Method (類別方法)</li>
<li>上述兩個可總稱為 Class Member</li>
<li>和其他 Class 間的繼承關係</li>
</ul>
<h2 id="如何以Java撰寫類別"><a href="#如何以Java撰寫類別" class="headerlink" title="如何以Java撰寫類別"></a>如何以Java撰寫類別</h2><p>Java 規定公共類別 (public class) 必須寫在該公共類別名稱的 <code>.java</code> 檔案內，例如 <code>public class Example</code> 就必須寫在 <code>Example.java</code> 這個檔案內。<code>Example.java</code> 裡面也可以定義其他的類別，但是只有 <code>class Example</code> 能夠宣告為 <code>public</code>，其他 <code>Example.java</code> 裡的 <code>class</code> 都不能宣告為 <code>public</code>。當 Java Virtual Machine 啟動時，它會去找命令列上所指定的 <code>class</code> 裡的 <code>public static void main(String[] argv)</code> 方法，當做是程式的進入點。這有點像是 C 語言的 <code>main</code> ， 不同處在於每個 java class 都可以定義自己的 <code>public static void main(String[] argv)</code>。</p>
<p><code>$ java Example</code></p>
<p>啟動上述的 JVM 時，JVM 會去執行 <code>class Example</code> 裡的 <code>public static void main(String[] argv)</code> 。以下範例 <code>Example.java</code> 說明如何定義 Java 的 class。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> speed; <span class="comment">// Object Variable</span></span><br><span class="line">    <span class="keyword">private</span> String direction; <span class="comment">// Object Variable, direction is a reference to String Object</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> numVehicle = <span class="number">0</span>; <span class="comment">// Class Variable</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Vehicle</span><span class="params">()</span> </span>&#123; <span class="comment">// Constructor, called when new a Object</span></span><br><span class="line">        <span class="keyword">this</span>(<span class="number">0</span>,<span class="string">"north"</span>); <span class="comment">// call another constructor to do initialization</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Vehicle</span><span class="params">(<span class="keyword">int</span> s, String dir)</span> </span>&#123; <span class="comment">// Another Constructor. Use overloading to define two constructors</span></span><br><span class="line">        <span class="keyword">float</span> speed; <span class="comment">// define a local variable</span></span><br><span class="line">        speed = s; <span class="comment">// the speed here refers to the above local variable</span></span><br><span class="line">        <span class="keyword">this</span>.speed = s; <span class="comment">// If we want to set object variable, use this.speed to refer object variable speed</span></span><br><span class="line">        direction = dir; <span class="comment">// dir is a reference to object, not the object itself</span></span><br><span class="line">        numVehicle++;   <span class="comment">// increase the Vehicle number</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> </span>&#123; <span class="comment">// Destructor, called when the object is garbage collected by JVM</span></span><br><span class="line">        System.out.println(<span class="string">"finalize has been called"</span>);</span><br><span class="line">        numVehicle--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSpeed</span><span class="params">(<span class="keyword">int</span> newSpeed)</span> </span>&#123; <span class="comment">// Object Method</span></span><br><span class="line">        <span class="keyword">this</span>.speed = newSpeed;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setDir</span><span class="params">(String dir)</span> </span>&#123; <span class="comment">// Object Method</span></span><br><span class="line">        <span class="keyword">this</span>.direction = dir;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSpeed</span><span class="params">()</span> </span>&#123; <span class="comment">// Object Method</span></span><br><span class="line">        <span class="keyword">return</span> speed;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">String <span class="title">getDir</span><span class="params">()</span> </span>&#123; <span class="comment">// Object Method</span></span><br><span class="line">        <span class="keyword">return</span> direction;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">totalVehicle</span><span class="params">()</span> </span>&#123; <span class="comment">// Class Method</span></span><br><span class="line">        <span class="keyword">return</span> numVehicle;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] argv)</span> </span>&#123;</span><br><span class="line">        Vehicle v1 = <span class="keyword">new</span> Vehicle(<span class="number">50</span>, <span class="string">"west"</span>); <span class="comment">// new 敘述用來產生物件. 物件產生時需要呼叫Constructor來初始化物件</span></span><br><span class="line">        Vehicle v2;</span><br><span class="line">        v1.setSpeed(<span class="number">30</span>);</span><br><span class="line">        v1.setDir(<span class="string">"north"</span>);</span><br><span class="line">        System.out.println(<span class="string">"V1: speed is "</span>+v1.getSpeed()+<span class="string">", direction is "</span>+v1.getDir()+<span class="string">".\n"</span>);</span><br><span class="line">        v2 = <span class="keyword">new</span> Vehicle(<span class="number">40</span>, <span class="string">"south"</span>);</span><br><span class="line">        System.out.println(<span class="string">"There are "</span>+Vehicle.totalVehicle()+<span class="string">" Vehicles in the world.\n"</span>);</span><br><span class="line">        v1 = v2; <span class="comment">// let reference v1 point to where v2 is pointing</span></span><br><span class="line">        System.out.println(<span class="string">"V1: speed is "</span>+v1.getSpeed()+<span class="string">", direction is "</span>+v1.getDir()+<span class="string">".\n"</span>);</span><br><span class="line">        System.gc(); <span class="comment">// force system to do garbage collection, the object previously pointed by v1 shall be destroyed</span></span><br><span class="line">        System.out.println(<span class="string">"There are "</span>+Vehicle.totalVehicle()+<span class="string">" Vehicles in the world.\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述例子裡所用到的關鍵字或類別名稱說明如下：</p>
<ul>
<li><code>public</code>：可用在<ul>
<li>class 前面表示此 class 可以供其他 package 裡的類別使用。同一個目錄下的 class 均可視為屬於同一個 package。</li>
<li>object or class member 前面，表示所有的 class 均可存取此 member。</li>
</ul>
</li>
<li><code>private</code>：可用在 object or class member 前面，表示只有定義這些 member 的 class 才可存取。</li>
<li><code>static</code>：可用在 member 前面。如果 member 前面有 static ，表示該 member 屬於 class ，否則屬於 object 。不論系統創造了多少 object, class variable 只有一個；而每個 object 都有其 object variable。存取class method 的語法是 <code>ClassName.classMethod();</code> 存取 object method 時,則必須以 <code>reference.objectMethod()</code> 來呼叫。在 Object Method 裡，可用 <code>this</code> 表示目前的物件。但在 Class Method 裡就不能存取 object member 了。</li>
<li><code>this</code>：表示目前這個物件</li>
<li><code>String</code>：定義於 java.lang package 下面的類別，屬於 Java 語言定義的標準程式庫。</li>
<li><code>System</code>：定義於 java.lang package 下面的類別，屬於 Java 語言定義的標準程式庫。</li>
<li><code>System.out</code> 是 class System 裡面的一個 Class Variable，其型態為 reference to 定義於 java.io package 裡面的 PrintStream。我們可透過該變數所指到的物件，將訊息印到螢幕上。</li>
<li><code>System.gc</code> 是 class System 裡面的一個 Class Method，呼叫該方法可強迫 JVM 回收沒有被任何 reference 指到的物件。當物件被回收時，該物件的 finalize 方法會被呼叫。</li>
<li><code>new</code>：用來產生新的物件。後面必須跟著某個 constructor ，以便進行初始化的動作。</li>
</ul>
<p><strong>Object Method 的名稱如果和 Class 的名稱相同, 則表示該 Method 為 Constructor。Constructor 不能宣告傳回值。</strong></p>
<p>要附帶說明的是，Java 以 <code>new</code> 指令來產生物件，但不像 C++ 有提供相對應的 <code>delete</code> 指令來消滅物件。Java 採用 Garbage Collection 的觀念，當系統於閒置期間自動呼叫或由使用者強制呼叫 <code>System.gc()</code> 時，沒有被任何 reference 指到的 Object 就會被回收。</p>
<p>Class 裡面一定要定義一個以上的 Constructor，但為了方便起見，如果 Compiler 發現某 Class 沒有定義 Constructor，則 Compiler 會幫我們產生一個不做任何事的 Constructor：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就相當於</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Overloading"><a href="#Overloading" class="headerlink" title="Overloading"></a>Overloading</h2><p>同一個 class 裡的 Method 名稱可以重複使用，只要可以由 Method 的參數個數和型態來區分就可以了。這種觀念稱為 overloading 。</p>
<p>不只一般的 method 可以 overloading, constructo r也可以 overloading。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Overloading</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Overloading</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">0</span>); <span class="comment">// call constructor Overloading(int)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Overloading</span><span class="params">(<span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.print(<span class="number">0</span>); <span class="comment">// call method print(int)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> msg)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">float</span> msg)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> msg, String others)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的例子裡說明 constructor 也可以 overloading 。要特別注意的是，傳回值並不能用來分辨要呼叫哪個 method，因此若再加上 <code>public int print()</code> 的宣告，就會造成編譯錯誤了。</p>
<h2 id="初始化的執行順序"><a href="#初始化的執行順序" class="headerlink" title="初始化的執行順序"></a>初始化的執行順序</h2><p>Class variable 是在該類別載入 JVM 時進行初始化的，因此寫作上經常在 class variable 的宣告後面加上初始化的動作。對 Object Variable 來說，是在產生 Object 時進行初始化的，但初始化的步驟可以寫在變數宣告後，也可以寫在 constructor 內，因此必須對其執行順序有所了解。步驟如下：</p>
<p>先將所有變數設為內定值。對數值型態來說，其值為 0；對 reference 來說，其值為 null；對 boolean 來說，其值為 false。<br>呼叫父類別的 constructor。<br>執行變數宣告的初始化動作。<br>執行自己的 constructor。<br>因此在如下的範例內</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitSequence</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> data = <span class="number">2</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">InitSequence</span><span class="params">(<span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] argv)</span> </span>&#123;</span><br><span class="line">        InitSequence s = <span class="keyword">new</span> InitSequence(<span class="number">3</span>);</span><br><span class="line">        System.out.println(s.data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>data</code> 的變化如下：</p>
<ol>
<li>設為內定值 0</li>
<li>呼叫父類別的 Constructor。因為類別 <code>InitSequence</code> 沒有宣告繼承任何類別， Java 規定此情況會自動繼承 <code>java.lang.Object</code> 這個類別。 Object 的 Constructor 不做任何事。</li>
<li>執行變數宣告的初始動作，成為 2</li>
<li>執行自己的 constructor，成為 3<br>因此最後執行的結果會在螢幕上印出數字 3。</li>
</ol>
<p>Java 語言還可以定義 static block：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticBlock</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123; <span class="comment">// this is a static block</span></span><br><span class="line">        data = (<span class="keyword">int</span>)(Math.random()*<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> data;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] argv)</span> </span>&#123;</span><br><span class="line">        System.out.println(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>static block 內的程式碼，是在該 class 載入 JVM 之後，進行 class variable 初始化之前的時間內執行。一般比較會使用 static block 的場合，是該 class 用到一些非 Java 的程式庫，需要透過 <code>System.loadLibrary(String libName)</code> 方法把外界的程式碼載入時。這樣寫的好處是只有當該 class 第一次被使用到時，才會下載相關軟體，以節省記憶體空間，避免重複下載，並可以把實作的細節和外界隔離開來。對沒有這種機制的 C 語言來說，很可能就必須在主程式內寫上一堆很難懂的啟動程式碼。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassNeedToLoadLibrary</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.loadLibrary(<span class="string">"mylib"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] argv)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="final-關鍵字"><a href="#final-關鍵字" class="headerlink" title="final 關鍵字"></a>final 關鍵字</h2><p>final 關鍵字用在變數宣告時，表示該變數的值只能在宣告時給定，然後就不能再更改了。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] argv)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> local = <span class="number">10</span>;</span><br><span class="line">        Main m = <span class="keyword">new</span> Main();</span><br><span class="line">        PI = <span class="number">100</span>; <span class="comment">// Compile Error, final variable can only be set at initialization</span></span><br><span class="line">        m.x = <span class="number">10</span>; <span class="comment">// Compile Error</span></span><br><span class="line">        local = <span class="number">100</span>; <span class="comment">// Compile Error</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        <div id="react-support-footer-root"></div>
      </div>
    </div>
  </div>
</div>

    


    

    <!-- js vendors -->
    <script src="//code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/2.1.0/lunr.min.js"></script>

    <!-- js source  -->
    <script src="/script/doc.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    

  </body>
</html>
